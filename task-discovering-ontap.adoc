---
sidebar: sidebar
permalink: task-discovering-ontap.html
keywords: ontap, cluster, discover, manage, discovering, fas, aff, discover onprem, discover aff cluster, discover cluster, add cluster, active iq, roles, subscriptions, licenses, digital advisor
summary: Discover on-prem ONTAP clusters from the NetApp Console so that you can start managing volumes and performing advanced management using ONTAP System Manager, which is available from the Console.
---

= Discover on-premises ONTAP clusters in NetApp Console
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
Discover on-premises ONTAP clusters from the NetApp Console so that you can start managing volumes and performing advanced management using ONTAP System Manager, directly from the Console.

.Required Console role:
Storage admin or System health specialist. link:https://docs.netapp.com/us-en/console-setup-admin/reference-iam-predefined-roles.html[Learn about NetApp Console access roles.^]


== Step 1: Review discovery and management options

You can add on-premises ONTAP clusters to the Console in two ways. The way you choose depends on whether or not you have a Console agent installed in your organization:

Discovery and management using a Console agent::
This option enables you to manage clusters running ONTAP by using the following features:

* Provides basic volume operations natively through the NetApp Console
* ONTAP System Manager (supported with ONTAP 9.10.0 and later), access System Manager for each respective cluster directly from the Console
* Integration with NetApp data services that provide data replication, backup and recovery, data classification, and cloud tiering

+
* You must have the Organization admin role to install a Console agent. Contact your Console administrator if you have questions. https://docs.netapp.com/us-en/console-setup-admin/task-user-settings.html#contact-your-organization-administrator[Contact your Organization admin.^]

Direct discovery and management::
This option enables you to manage clusters running ONTAP 9.12.1 and later by using System Manager. No other management options are available. You can't use the Standard view and you can't enable NetApp data services.
+
This option doesn't require a Console agent.
+
When you access System Manager on an on-premises ONTAP cluster running 9.12.1 or later with connectivity to the Console, you'll be prompted to manage the cluster directly from the Console. If you follow this prompt, it discovers the cluster in the Console using the direct discovery option.

Once discovered, your clusters are available on the *Systems* page in the Console.

If you decide to add a Console agent to your NetApp Console, you need to re-add your on-premises cluster from the *Undiscovered systems* page. This enables native management from the Console and access to NetApp data services. You should then remove the other system.

== Step 2: Set up your environment

Before you discover your on-premises ONTAP clusters, ensure that you've met the following requirements.

General requirements::

* You need the cluster management IP address and the password for the admin user account.

* The Console discovers ONTAP clusters using HTTPS. If you use custom firewall policies, the ONTAP cluster must allow inbound HTTPS access through port 443.
+
The default "mgmt" firewall policy allows inbound HTTPS access from all IPs. If modified, ensure the HTTPS protocol is enabled for the agent host.

To discover a system with a Console agent::

* The on-premises cluster must be running ONTAP 8.3 or later.

* You must have a Console agent installed in a cloud provider or on your premises.
+
To tier cold data to the cloud, review the agent requirements for your target environment.
+
** https://docs.netapp.com/us-en/console-setup-admin/concept-connectors.html[Learn about Console agents^]
** https://docs.netapp.com/us-en/console-setup-admin/task-manage-multiple-connectors.html[Learn how to switch between multiple agents^]
** https://docs.netapp.com/us-en/bluexp-tiering/concept-cloud-tiering.html[Learn about NetApp Cloud Tiering^]

* The agent host must allow outbound connections through port 443 (HTTPS) and the ONTAP cluster must allow inbound HTTP access through port 443 to the cluster management LIF.
+
If the agent is in the cloud, the predefined security group allows all outbound communication.

Requirements for direct discovery::

* The on-premises cluster must be running ONTAP 9.12.1 or later.

* The cluster must have inbound and outbound connectivity to the NetApp Console service:
+
\https://cloudmanager.cloud.netapp.com/ontap-service/check-service-connection

* The computer that you're using to access the Console must have a network connection to the on-premises ONTAP cluster, similar to how you would provide connections to other resources in your private network.

== Step 3: Discover a cluster

Discover your on-premises ONTAP clusters from the Console in one of two ways:

* From *Storage > Management > Systems* , select *Add +* and manually add details about the on-premises ONTAP cluster.

* From *Storage > Management > Discoverabe systems*  select a cluster that the Console pre-discovered based on the ONTAP clusters that are associated with the email address for your NetApp Console login.

When you start the discovery process, the Console discovers a cluster as follows:

* If you have a Console agent that has a connection to an ONTAP cluster, then the Console uses that agent to discover and manage the cluster.

* If you don't have a Console agent or if your agent doesn't have a connection to the ONTAP cluster, then the Console automatically uses the direct discovery and management option.

// start tabbed area

[role="tabbed-block"]
====

.Discover a cluster manually
--
Discover an on-premises ONTAP cluster in the Console by entering the cluster management IP address and the password for the admin user account.

.Steps

. From the navigation menu, select *Storage > Management*.

. On the *Systems* page, select *Add +*.

. Select *On-Premises*.

. Next to On-Premises ONTAP, select *Discover*.

. On the _Discover_ page, enter the cluster management IP address, and the password for the admin user account.

. If you're discovering the cluster directly (without a Console Agent), select *Save the credentials*.
+
If you select this option, you won't need to re-enter the credentials each time that you access the system from the Console. These credentials are associated with your own NetApp Console user login. They aren't saved for use by anyone else in the NetApp Console organization.

. Select *Discover*.
+
If you don't have a Console agent and the IP address isn't reachable from the Console, you are prompted to create a Console agent. Contact your Console administrator to create a Console agent if you don't have one.

.Result

The Console adds the discovered cluster as a system on the *Systems* page. You can now start managing the cluster.

* link:task-manage-ontap-direct.html[Learn how to manage clusters discovered directly]

* link:task-manage-ontap-connector.html[Learn how to manage clusters discovered with a Console agent]
--

.Add a pre-discovered cluster
--
The Console discovers ONTAP clusters linked to your login email and displays them as undiscovered clusters on the *Discoverable systems* page. You can view the list of undiscovered clusters and add them one at a time.

.About this task

Note the following about the on-premises ONTAP clusters that appear on the *Discoverable systems* page:

* The email address that you use to log in to the Console must be associated with a registered, full-level NetApp Support Site (NSS) account.

** If you log in to the Console with your NSS account and navigate to the *Discoverable systems* page, the Console uses that NSS account to find the clusters that are associated with the account.

** If you log in to the Console with a local account or a federated connection and you navigate to the *Discoverable systems* page, the Console prompts you to verify your email. If that email address is associated with an NSS account, the Console uses that information to find the clusters that are associated with the account.

* The Console only shows the ONTAP clusters that have successfully sent AutoSupport messages to NetApp.

* To refresh the inventory list, exit the *Discoverable systems* page, wait 5 minutes, and then go back to it.

.Steps

. From the navigation menu, select *Storage > Management*.


. On the *Discoverable systems* page, select *Discover* for on-premises ONTAP.
+
image:screenshot-my-estate-ontap.png[A screenshot of the Discoverable systems page that shows 12 undiscovered on-premises ONTAP clusters.]

. Select a cluster and then select *Discover*.
+
image:screenshot-my-estate-ontap-discover.png[A screenshot of the Discoverable systems page that shows 12 undiscovered on-premises ONTAP clusters.]

. Enter the password for the admin user account.

. Select *Discover*.
+
If you don't have a Console agent and the IP address isn't reachable from the Console, then you'll be prompted to create a Console agent. Contact your Console administrator to create a Console agent if you don't have one.


* link:task-manage-ontap-direct.html[Learn how to manage clusters discovered directly]

* link:task-manage-ontap-connector.html[Learn how to manage clusters discovered with a Console agent]
--

====
// end tabbed area